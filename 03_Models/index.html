<!doctype html><html lang=de class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://fa-team-szut.github.io/lf8_webshop_tutorial/03_Models/ rel=canonical><link href=../02_SpringBoot_Config/ rel=prev><link href=../04_Bidirektionale_Assoziationen/ rel=next><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.21"><title>03 Models - LF8-Webshop-Tutorial</title><link rel=stylesheet href=../assets/stylesheets/main.2a3383ac.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#implementierung-der-models class=md-skip> Zum Inhalt </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Kopfzeile> <a href=.. title=LF8-Webshop-Tutorial class="md-header__button md-logo" aria-label=LF8-Webshop-Tutorial data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> LF8-Webshop-Tutorial </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> 03 Models </span> </div> </div> </div> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Suche placeholder=Suche autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Suche> <button type=reset class="md-search__icon md-icon" title=Zurücksetzen aria-label=Zurücksetzen tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Suche wird initialisiert </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title=LF8-Webshop-Tutorial class="md-nav__button md-logo" aria-label=LF8-Webshop-Tutorial data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> LF8-Webshop-Tutorial </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Start </span> </a> </li> <li class=md-nav__item> <a href=../01_Docker_Postgres/ class=md-nav__link> <span class=md-ellipsis> 01 Docker & Postgres </span> </a> </li> <li class=md-nav__item> <a href=../02_SpringBoot_Config/ class=md-nav__link> <span class=md-ellipsis> 02 Spring Boot Config </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> 03 Models </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> 03 Models </span> </a> <nav class="md-nav md-nav--secondary" aria-label=Inhaltsverzeichnis> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Inhaltsverzeichnis </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#contactentity class=md-nav__link> <span class=md-ellipsis> ContactEntity </span> </a> </li> <li class=md-nav__item> <a href=#supplierentity class=md-nav__link> <span class=md-ellipsis> SupplierEntity </span> </a> </li> <li class=md-nav__item> <a href=#articleentity class=md-nav__link> <span class=md-ellipsis> ArticleEntity </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../04_Bidirektionale_Assoziationen/ class=md-nav__link> <span class=md-ellipsis> 04 Bidirektionale Assoziationen </span> </a> </li> <li class=md-nav__item> <a href=../05_Repositories/ class=md-nav__link> <span class=md-ellipsis> 05 Repositories </span> </a> </li> <li class=md-nav__item> <a href=../06_DTOs_und_Mapping/ class=md-nav__link> <span class=md-ellipsis> 06 DTOs & Mapping </span> </a> </li> <li class=md-nav__item> <a href=../07_SupplierController/ class=md-nav__link> <span class=md-ellipsis> 07 SupplierController </span> </a> </li> <li class=md-nav__item> <a href=../08_Integrationstests/ class=md-nav__link> <span class=md-ellipsis> 08 Integrationstests </span> </a> </li> <li class=md-nav__item> <a href=../09_ExceptionHandling/ class=md-nav__link> <span class=md-ellipsis> 09 Exception Handling </span> </a> </li> <li class=md-nav__item> <a href=../10_ArticleController/ class=md-nav__link> <span class=md-ellipsis> 10 ArticleController </span> </a> </li> <li class=md-nav__item> <a href=../11_Erweiterungen/ class=md-nav__link> <span class=md-ellipsis> 11 Erweiterungen </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=implementierung-der-models>Implementierung der Models<a class=headerlink href=#implementierung-der-models title="Permanent link">&para;</a></h1> <blockquote> <p><strong>Fortschritt:</strong> <!-- wird live gezählt --> - Gesamt: <span id=t-total>0</span> - Erledigt: <span id=t-done>0</span></p> </blockquote> <p>Für die Validierung unserer Modelklassen benötigen wir eine weitere Abhängigkeit. </p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Füge daher in der <code>build.gradle.kts</code> die folgende Abhängigkeit am Ende des Dependencies‑Bereichs hinzu:</li> </ul> <div class=highlight><pre><span></span><code><span class=n>implementation</span><span class=p>(</span><span class=s>&quot;org.springframework.boot:spring-boot-starter-validation&quot;</span><span class=p>)</span>
</code></pre></div> <p>Bisher haben wir eine Package‑Struktur gewählt, die die Dateien nach ihrer Schicht innerhalb der Anwendung sortiert hat: <code>controller</code>, <code>model</code>, <code>repository</code>. Das ist im Prinzip auch in Ordnung. Beim Entwickeln größerer Anwendungen kann es aber nerven, ständig zwischen den Packages hin und her wechseln zu müssen, sobald man Änderungen an einem Modul vornimmt, weil sich der Controller, das Model, womöglich verschiedene Services und das Repository in unterschiedlichen Packages befinden. Wir wählen daher dieses Mal eine <strong>Sortierung nach Modulen</strong>. </p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Erstelle daher erst einmal die Packages <code>supplier</code>, <code>article</code> und <code>contact</code>.</li> </ul> <p>Um den Zweck der Modelklassen im Namen deutlicher hervorzuheben, hängen wir an jede Modelklassenbezeichnung das Wörtchen <strong>Entity</strong> an. Das erleichtert noch einmal die Suche nach unseren Klassen in der neuen Package‑Struktur.</p> <pre class=mermaid><code>classDiagram
    class SupplierEntity {
        - id: Long
        - name: String
        - contact: Contact
        - articles: Set&lt;Article&gt;
    }

    class ContactEntity {
        - id: Long
        - street: String
        - postcode: String
        - city: String
        - phone: String
        - supplier: Supplier
    }

    class ArticleEntity {
        - id: Long
        - designation: String
        - price: Double
        - createDate: LocalDateTime
        - lastUpdateDate: LocalDateTime
        - supplier: Supplier
    }

    SupplierEntity "1" &lt;--&gt; "1" ContactEntity : has
    SupplierEntity "1" &lt;--&gt; "*" ArticleEntity : delivers</code></pre> <h2 id=contactentity>ContactEntity<a class=headerlink href=#contactentity title="Permanent link">&para;</a></h2> <ul class=task-list> <li class=task-list-item> <p><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Implementiere im Package <code>contact</code> eine Klasse mit dem Bezeichner <code>ContactEntity</code>. Lasse Konstruktoren, Getter und Setter von Lombok generieren. Annotiere analog zur letzten Übung die Klasse, so dass sie von Spring Data in einem Datenbankmodell abgebildet wird. </p> </li> <li class=task-list-item> <p><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Benutze für die automatische Generierung des Primärschlüssels dieses Mal die Strategie <strong>IDENTITY</strong>. Sie bewirkt, dass nicht mehr die angelegten Entitäten egal welchen Typs von 1 beginnend, sondern die Entitäten jeder einzelnen Tabelle beginnend mit 1 durchgezählt werden.</p> </li> </ul> <p>Um die Standardbezeichnungen von Hibernate zu umgehen und Kontaktobjekte später validieren zu können, erhält die Klasse <code>ContactEntity</code> weitere Annotationen. Zum einen soll es nicht möglich sein, Kontaktdaten mit null‑Werten anzulegen. Es sollen nur vollständige Adressen mit Angabe der Straße, der Postleitzahl und des Ortes akzeptiert werden, wobei die Länge der Straßen‑ und der Ortangabe 50 Zeichen nicht überschreiten darf. Zum anderen soll die Datenbanktabelle für den Kontakt nicht den Bezeichner der Klasse haben, sondern <strong>„supplier_contact“</strong> heißen. Außerdem soll die Spalte für die Postleitzahl mit der englischen Abkürzung <strong>„zip“</strong> bezeichnet werden. </p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Annotiere die Klasse daher wie unten abgebildet.</li> </ul> <div class=highlight><pre><span></span><code><span class=nd>@Entity</span>
<span class=nd>@Table</span><span class=p>(</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;supplier_contact&quot;</span><span class=p>)</span>
<span class=nd>@Getter</span>
<span class=nd>@Setter</span>
<span class=nd>@NoArgsConstructor</span>
<span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>ContactEntity</span><span class=w> </span><span class=p>{</span>

<span class=w>    </span><span class=nd>@Id</span>
<span class=w>    </span><span class=nd>@GeneratedValue</span><span class=p>(</span><span class=n>strategy</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>GenerationType</span><span class=p>.</span><span class=na>IDENTITY</span><span class=p>)</span>
<span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>Long</span><span class=w> </span><span class=n>id</span><span class=p>;</span>

<span class=w>    </span><span class=nd>@NotBlank</span><span class=p>(</span><span class=n>message</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;Street is mandatory&quot;</span><span class=p>)</span>
<span class=w>    </span><span class=nd>@Size</span><span class=p>(</span><span class=n>max</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>50</span><span class=p>)</span>
<span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>street</span><span class=p>;</span>

<span class=w>    </span><span class=nd>@NotBlank</span><span class=p>(</span><span class=n>message</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;Postcode is mandatory&quot;</span><span class=p>)</span>
<span class=w>    </span><span class=nd>@Column</span><span class=p>(</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;zip&quot;</span><span class=p>)</span>
<span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>postcode</span><span class=p>;</span>

<span class=w>    </span><span class=nd>@NotBlank</span><span class=p>(</span><span class=n>message</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;City is mandatory&quot;</span><span class=p>)</span>
<span class=w>    </span><span class=nd>@Size</span><span class=p>(</span><span class=n>max</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>50</span><span class=p>)</span>
<span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>city</span><span class=p>;</span>

<span class=w>    </span><span class=nd>@NotBlank</span><span class=p>(</span><span class=n>message</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;Phone is mandatory&quot;</span><span class=p>)</span>
<span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>phone</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <p>Statt <code>@NotBlank</code> könnten auch <code>@NotNull</code> oder <code>@NotEmpty</code> verwendet werden. <code>@NotNull</code> verhindert lediglich <code>null</code>, <code>@NotEmpty</code> verlangt Länge &gt; 0, <code>@NotBlank</code> verhindert darüber hinaus nur Leerzeichen.</p> <h2 id=supplierentity>SupplierEntity<a class=headerlink href=#supplierentity title="Permanent link">&para;</a></h2> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Implementiere analog zu <code>ContactEntity</code> die Klasse <code>SupplierEntity</code>. Beachte: Die Datenbanktabelle soll <code>supplier</code> heißen und der Name ist Pflichtfeld (max. 50 Zeichen).</li> </ul> <div class=highlight><pre><span></span><code><span class=p>...</span>
<span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>SupplierEntity</span><span class=w> </span><span class=p>{</span>

<span class=w>    </span><span class=p>...</span>

<span class=p>}</span>
</code></pre></div> <h2 id=articleentity>ArticleEntity<a class=headerlink href=#articleentity title="Permanent link">&para;</a></h2> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Implementiere die Klasse <code>ArticleEntity</code> wie unten angegeben. Die Attribute <code>designation</code> und <code>price</code> sind Pflichtwerte. Beachte die verwendeten Lombok‑Annotationen <code>@Getter</code>, <code>@Setter</code> und <code>@NoArgsConstructor</code>, die anstelle der <code>@Data</code> verwendet wurden. <code>@Data</code> überschreibt u. a. <code>hashCode()</code> und führt hier später zu Fehlern in Hibernate.</li> </ul> <div class=highlight><pre><span></span><code><span class=p>...</span>
<span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>ArticleEntity</span><span class=w> </span><span class=p>{</span>

<span class=w>    </span><span class=p>...</span>

<span class=p>}</span>
</code></pre></div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Zurück zum Seitenanfang </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["navigation.sections", "navigation.top", "toc.integrate", "search.suggest", "search.highlight", "content.code.copy", "content.progress"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "In Zwischenablage kopiert", "clipboard.copy": "In Zwischenablage kopieren", "search.result.more.one": "1 weiteres Suchergebnis auf dieser Seite", "search.result.more.other": "# weitere Suchergebnisse auf dieser Seite", "search.result.none": "Keine Suchergebnisse", "search.result.one": "1 Suchergebnis", "search.result.other": "# Suchergebnisse", "search.result.placeholder": "Suchbegriff eingeben", "search.result.term.missing": "Es fehlt", "select.version": "Version ausw\u00e4hlen"}, "version": null}</script> <script src=../assets/javascripts/bundle.f55a23d4.min.js></script> <script src=../assets/js/progress.js></script> </body> </html>